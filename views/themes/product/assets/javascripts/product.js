"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(n,i){this.$element=t(n),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(i)&&i),this.init()}var n="qor.product.variants",i="enable."+n,r="disable."+n,a='.qor-product__property select[data-toggle="qor.chooser"]',o=".qor-product__property-selector";return e.prototype={constructor:e,init:function(){this.bind(),this.variants={},this.productMetas=[],this.templateData={},this.initVariants(),this.initMetas()},bind:function(){this.$element.on("select2:select",a,this.selectVariants.bind(this))},unbind:function(){},initVariants:function(){for(var t=this.$element.find(o),e=0,n=t.length;e<n;e++)this.variants[t[e].dataset.variantType]=[]},initMetas:function(){for(var t=this.$element.find("td.qor-product__meta"),e=0,n=t.length;e<n;e++)this.productMetas.push(t[e].dataset.inputName);this.setTemplate()},setTemplate:function(){for(var t=this.productMetas,e="<tr>",n=0,i=t.length;n<i;n++)e=e+"<td>[["+t[n]+"]]</td>",this.templateData[t[n]]="";this.template=e+"</tr>"},selectVariants:function(e){var n=t(e.target).closest(o).data("variant-type"),i=e.params.data.text||e.params.data.title;this.variants[n].push(i),this.renderVariants()},renderVariants:function(){var e=this.variants,n=!0,i=!1,r=void 0;try{for(var a,o=Object.keys(e)[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)for(var s=a.value,u=0,c=e[s].length;u<c;u++)t(".qor-product__table table tbody").append(window.Mustache.render(this.template,this.templateData))}catch(t){i=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(i)throw r}}},destroy:function(){this.unbind(),this.$element.removeData(n)}},e.plugin=function(i){return this.each(function(){var r,a=t(this),o=a.data(n);if(!o){if(/destroy/.test(i))return;a.data(n,o=new e(this,i))}"string"==typeof i&&t.isFunction(r=o[i])&&r.apply(o)})},t(function(){var n='[data-toggle="qor.product.variants"]';t(document).on(r,function(i){e.plugin.call(t(n,i.target),"destroy")}).on(i,function(i){e.plugin.call(t(n,i.target))}).triggerHandler(i)}),e});